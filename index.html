<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">

  <title> Nihar's KV </title>
</head>
<button onclick="fetchNotes()" style='background-color: dodgerblue'>GET LINKS</button>
<textarea id="data-container" rows="10" cols="50"></textarea>

<script>

function fetchNotes () {
    fetch(`https://infinite-marten-44102.upstash.io/`, {
  headers: {
    Authorization: `Bearer AqxGAAIgcDERzC1gQ7mirZ5rFhmB56tN7R-uu2PRqgo3nIJ11kO5vQ`,
  },
  body: '["LRANGE", "Cloud_Message", "0", "-1"]',
  method: 'POST',
})
    .then(response => response.json())
    .then(data => {
        let lines = [];
        data.result.forEach(jsonString => {
            let parsedObject = JSON.parse(jsonString);
            for (const key in parsedObject) {
                if (parsedObject.hasOwnProperty(key)) {
                    lines.push(`${parsedObject[key]}`);
                }
            }
        });
        const result = lines.join('\n\n');
        const container = document.getElementById('data-container');
        container.value = result;
    })
    .catch(error => {
        console.error('Error fetching or parsing data:', error);
    });
}

}
</script>
</body>
</html>
